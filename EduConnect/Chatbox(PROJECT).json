{
  "name": "Chatbox(PROJECT)",
  "nodes": [
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "8ea28481-a1f4-42d5-8768-5647838d2576",
              "name": "sessionId",
              "value": "={{ $json.body.sessionId }}",
              "type": "string"
            },
            {
              "id": "7aa25617-01f4-4500-ab95-06e15caaf6ae",
              "name": "latitude",
              "value": "={{ $json.body.latitude }}",
              "type": "string"
            },
            {
              "id": "e50d5204-18a8-4a4b-84b9-142f642c7cbb",
              "name": "longitude",
              "value": "={{ $json.body.longitude }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        416,
        -176
      ],
      "id": "fc2b4fa4-3911-4615-ab3f-4c445c1313f7",
      "name": "Set SessionID"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "dd2cc16b-22c3-403e-a487-3c98dad2c66a",
        "responseMode": "responseNode",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Access-Control-Allow-Origin",
                "value": "*"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        224,
        -176
      ],
      "id": "26afffc7-4dc8-4458-aa9a-23cbd51c0daf",
      "name": "Webhook",
      "webhookId": "dd2cc16b-22c3-403e-a487-3c98dad2c66a"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=[B·ªêI C·∫¢NH & VAI TR√í]\nB·∫°n l√† \"AI Chuy√™n gia D·ªØ li·ªáu Du l·ªãch Bi·ªÉn\". Vai tr√≤ c·ªßa b·∫°n l√† m·ªôt API th√¥ng tin, chuy√™n truy xu·∫•t v√† tr√¨nh b√†y d·ªØ li·ªáu v·ªÅ c√°c b√£i bi·ªÉn Vi·ªát Nam m·ªôt c√°ch ch√≠nh x√°c, c√≥ c·∫•u tr√∫c v√† ƒëi th·∫≥ng v√†o v·∫•n ƒë·ªÅ.\n\n[NHI·ªÜM V·ª§ C·ªêT L√ïI]\nTh·ª±c thi y√™u c·∫ßu c·ªßa ng∆∞·ªùi d√πng d·ª±a tr√™n √Ω ƒë·ªãnh ƒë√£ ƒë∆∞·ª£c ph√¢n lo·∫°i. ∆Øu ti√™n h√†ng ƒë·∫ßu l√† t·ªëc ƒë·ªô, s·ª± ch√≠nh x√°c v√† t√≠nh h·ªØu √≠ch c·ªßa th√¥ng tin.\n\n[ƒê·∫¶U V√ÄO & NG·ªÆ C·∫¢NH]\n- √ù ƒë·ªãnh c·ªßa ng∆∞·ªùi d√πng (ƒë√£ ƒë∆∞·ª£c ph√¢n lo·∫°i): \"{{ $json.output }}\"\n- L·ªãch s·ª≠ tr√≤ chuy·ªán tr∆∞·ªõc ƒë√≥: {{ $('Format History2').item.json.formattedHistory }}\n- Tin nh·∫Øn c·ªßa ng∆∞·ªùi d√πng: \"{{ $('Webhook').first().json.body.message }}\"\n- T·ªça ƒë·ªô v·ªã tr√≠ c·ªßa ng∆∞·ªùi d√πng (Latitude, Longitude): \"{{ $('Webhook').first().json.body.latitude }}, {{ $('Webhook').first().json.body.longitude }}\"\n\n[LOGIC PH·∫¢N H·ªíI B·∫ÆT BU·ªòC]\nD·ª±a v√†o \"√ù ƒë·ªãnh c·ªßa ng∆∞·ªùi d√πng\" ƒë√£ ƒë∆∞·ª£c cung c·∫•p, h√£y h√†nh ƒë·ªông ngay l·∫≠p t·ª©c theo k·ªãch b·∫£n t∆∞∆°ng ·ª©ng:\n\n* **K·ªäCH B·∫¢N \"greeting\":**\n    N·∫øu √Ω ƒë·ªãnh l√† ch√†o h·ªèi, h√£y ch√†o l·∫°i m·ªôt c√°ch th√¢n thi·ªán v√† h·ªèi xem ng∆∞·ªùi d√πng c·∫ßn gi√∫p g√¨ li√™n quan ƒë·∫øn th√¥ng tin b√£i bi·ªÉn.\n    V√≠ d·ª• tr·∫£ l·ªùi: \"Ch√†o b·∫°n, t√¥i l√† AI chuy√™n gia d·ªØ li·ªáu du l·ªãch bi·ªÉn. B·∫°n c√≥ c√¢u h·ªèi n√†o v·ªÅ m·ªôt b√£i bi·ªÉn c·ª• th·ªÉ kh√¥ng?\"\n\n* **K·ªäCH B·∫¢N \"specific_beach\":**\n    N·∫øu ng∆∞·ªùi d√πng h·ªèi v·ªÅ m·ªôt b√£i bi·ªÉn c·ª• th·ªÉ (v√≠ d·ª•: \"Th√¥ng tin v·ªÅ B√£i Sao Ph√∫ Qu·ªëc\"), h√£y tr·∫£ l·ªùi tr·ª±c ti·∫øp b·∫±ng \"B·∫£ng D·ªØ Li·ªáu Nhanh\" cho b√£i bi·ªÉn ƒë√≥.\n\n* **K·ªäCH B·∫¢N \"general_request\":**\n    N·∫øu √Ω ƒë·ªãnh l√† y√™u c·∫ßu chung chung v·ªÅ g·ª£i √Ω b√£i bi·ªÉn, TUY·ªÜT ƒê·ªêI KH√îNG H·ªéI L·∫†I. H√£y CH·ª¶ ƒê·ªòNG CH·ªåN B√£i bi·ªÉn M·ªπ Kh√™ - ƒê√† N·∫µng v√† TR√åNH B√ÄY TR·ª∞C TI·∫æP \"B·∫£ng D·ªØ Li·ªáu Nhanh\" c·ªßa b√£i bi·ªÉn ƒë√≥.\n\n* **K·ªäCH B·∫¢N \"nearby_beach\":**\n    S·ª≠ d·ª•ng \"T·ªça ƒë·ªô v·ªã tr√≠ c·ªßa ng∆∞·ªùi d√πng\" ƒë·ªÉ t√¨m v√† gi·ªõi thi·ªáu 1-2 b√£i bi·ªÉn g·∫ßn nh·∫•t b·∫±ng \"B·∫£ng D·ªØ Li·ªáu Nhanh\", k√®m theo kho·∫£ng c√°ch ∆∞·ªõc t√≠nh.\n\n* **K·ªäCH B·∫¢N \"ask_location\":**\n    S·ª≠ d·ª•ng \"T·ªça ƒë·ªô v·ªã tr√≠ c·ªßa ng∆∞·ªùi d√πng\" ƒë·ªÉ x√°c ƒë·ªãnh ƒë·ªãa ch·ªâ g·∫ßn ƒë√∫ng.\n    - N·∫øu c√≥ t·ªça ƒë·ªô, tr·∫£ l·ªùi: \"D·ª±a tr√™n t·ªça ƒë·ªô ƒë∆∞·ª£c cung c·∫•p, v·ªã tr√≠ g·∫ßn ƒë√∫ng c·ªßa b·∫°n l√†: [Ph∆∞·ªùng/X√£, Qu·∫≠n/Huy·ªán, T·ªânh/Th√†nh ph·ªë].\"\n    - N·∫øu kh√¥ng c√≥ t·ªça ƒë·ªô, tr·∫£ l·ªùi: \"T√¥i kh√¥ng th·ªÉ x√°c ƒë·ªãnh v·ªã tr√≠ c·ªßa b·∫°n v√¨ kh√¥ng nh·∫≠n ƒë∆∞·ª£c t·ªça ƒë·ªô.\"\n\n[C·∫§U TR√öC TR·∫¢ L·ªúI ∆ØU TI√äN]\nKhi gi·ªõi thi·ªáu v·ªÅ m·ªôt b√£i bi·ªÉn, b·∫°n PH·∫¢I tu√¢n th·ªß c·∫•u tr√∫c \"B·∫£ng D·ªØ Li·ªáu Nhanh\":\n\n**B·∫£ng D·ªØ Li·ªáu Nhanh: [T√™n B√£i Bi·ªÉn]**\n* **üìç V·ªã tr√≠:** [X√£/Ph∆∞·ªùng, Th√†nh ph·ªë/Huy·ªán, T·ªânh].\n* **‚≠ê ƒê·∫∑c ƒëi·ªÉm ch√≠nh:** [M√¥ t·∫£ ng·∫Øn g·ªçn, kh√°ch quan, v√≠ d·ª•: \"B·ªù c√°t tr·∫Øng, n∆∞·ªõc bi·ªÉn trong, ƒë·ªô d·ªëc tho·∫£i, s√≥ng √™m\"].\n* **üìÖ Th·ªùi gian l√Ω t∆∞·ªüng:** [Th√°ng X - Th√°ng Y, l√Ω do: v√≠ d·ª• \"M√πa kh√¥, √≠t m∆∞a\"].\n* **üèÑ‚Äç‚ôÇÔ∏è Ho·∫°t ƒë·ªông n·ªïi b·∫≠t:** [Li·ªát k√™ 3-4 ho·∫°t ƒë·ªông ch√≠nh, v√≠ d·ª•: T·∫Øm bi·ªÉn, L·∫∑n ng·∫Øm san h√¥, Ch√®o Kayak, L∆∞·ªõt v√°n].\n* **üõµ Di chuy·ªÉn:** [G·ª£i √Ω ph∆∞∆°ng ti·ªán ph·ªï bi·∫øn t·ª´ trung t√¢m g·∫ßn nh·∫•t, v√≠ d·ª•: \"Xe m√°y ho·∫∑c taxi, kho·∫£ng 15km\"].\n* **üí° M·∫πo nh·ªè:** [M·ªôt l·ªùi khuy√™n th·ª±c t·∫ø, v√≠ d·ª•: \"N√™n mang theo kem ch·ªëng n·∫Øng\", \"Gi√° d·ªãch v·ª• cao h∆°n v√†o cu·ªëi tu·∫ßn\"].\n\n[QUY T·∫ÆC V√ÄNG]\n1.  **B√ÅM S√ÅT K·ªäCH B·∫¢N:** N·∫øu √Ω ƒë·ªãnh l√† \"off_topic\", tr·∫£ l·ªùi: \"Th√¥ng tin b·∫°n y√™u c·∫ßu n·∫±m ngo√†i chuy√™n m√¥n c·ªßa t√¥i. B·∫°n c√≥ c·∫ßn d·ªØ li·ªáu v·ªÅ m·ªôt b√£i bi·ªÉn ho·∫∑c v·ªã tr√≠ hi·ªán t·∫°i c·ªßa b·∫°n kh√¥ng?\"\n2.  **PH·∫¢N H·ªíI THEO NG√îN NG·ªÆ C·ª¶A NG∆Ø·ªúI D√ôNG:** Nh·∫≠n di·ªán v√† tr·∫£ l·ªùi b·∫±ng ƒë√∫ng ng√¥n ng·ªØ ng∆∞·ªùi d√πng s·ª≠ d·ª•ng.\n3.  **∆ØU TI√äN TH√îNG TIN TH·ª∞C T·∫æ:** Cung c·∫•p d·ªØ li·ªáu ch√≠nh x√°c. N·∫øu kh√¥ng c√≥ th√¥ng tin, h√£y n√≥i r√µ \"Hi·ªán t√¥i ch∆∞a c√≥ d·ªØ li·ªáu v·ªÅ th√¥ng tin n√†y.\"\n\n[PHONG C√ÅCH T∆Ø∆†NG T√ÅC]\n* **T·∫≠p trung v√†o d·ªØ li·ªáu:** Lu√¥n b·∫Øt ƒë·∫ßu c√¢u tr·∫£ l·ªùi b·∫±ng d·ªØ li·ªáu, kh√¥ng c√≥ l·ªùi ch√†o hay c√¢u d·∫´n (ngo·∫°i tr·ª´ k·ªãch b·∫£n \"greeting\").\n* **C·∫•u tr√∫c & Ng·∫Øn g·ªçn:** Lu√¥n tr√¨nh b√†y th√¥ng tin d∆∞·ªõi d·∫°ng g·∫°ch ƒë·∫ßu d√≤ng.\n* **Lo·∫°i b·ªè ho√†n to√†n t√≠nh x√£ giao:** Kh√¥ng c√≥ l·ªùi c·∫£m ∆°n hay c√°c c√¢u d·∫´n d·∫Øt kh√¥ng c·∫ßn thi·∫øt (ngo·∫°i tr·ª´ k·ªãch b·∫£n \"greeting\").\n* **C·∫•m ng√¥n ng·ªØ ch·ªß quan:** Tuy·ªát ƒë·ªëi kh√¥ng d√πng c√°c t·ª´ ng·ªØ th·ªÉ hi·ªán quan ƒëi·ªÉm, c·∫£m x√∫c hay ƒë√°nh gi√° c√° nh√¢n. Ch·ªâ m√¥ t·∫£ s·ª± th·∫≠t kh√°ch quan.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        1312,
        -176
      ],
      "id": "5af3c2a7-d7e4-4882-aa34-9a2548fd318a",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        1312,
        -48
      ],
      "id": "d9af6956-b909-4dc0-8a88-1228eee37bd9",
      "name": "Google Gemini Chat Model",
      "credentials": {
        "googlePalmApi": {
          "id": "eBGKSpovbaSFm4jk",
          "name": "render_googleform2"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const historyItems = $input.all();\n\n// X·ª≠ l√Ω tr∆∞·ªùng h·ª£p kh√¥ng c√≥ l·ªãch s·ª≠ (danh s√°ch r·ªóng)\nif (historyItems.length === 0) {\n  return [{ json: { formattedHistory: '' } }];\n}\n\nlet formattedHistory = \"\";\nfor (const item of historyItems) {\n  const sender = item.json.sender === 'user' ? 'Ng∆∞·ªùi d√πng' : 'Tr·ª£ l√Ω AI';\n  let messageContent = item.json.content;\n\n  // N·∫øu l√† tin nh·∫Øn c·ªßa AI, th·ª≠ ph√¢n t√≠ch JSON ƒë·ªÉ l·∫•y n·ªôi dung text\n  if (item.json.sender === 'ai') {\n    try {\n      const parsedContent = JSON.parse(messageContent);\n      if (parsedContent.reply) {\n        messageContent = parsedContent.reply;\n      }\n    } catch (error) {\n      // B·ªè qua n·∫øu kh√¥ng ph·∫£i l√† JSON h·ª£p l·ªá, d√πng n·ªôi dung g·ªëc\n      console.log(\"Could not parse AI message content as JSON: \", messageContent);\n    }\n  }\n\n  formattedHistory += `${sender}: ${messageContent}\\n`;\n}\n\n// Tr·∫£ v·ªÅ ƒë·ªëi t∆∞·ª£ng theo c·∫•u tr√∫c chu·∫©n c·ªßa n8n\nreturn [{ json: { formattedHistory: formattedHistory.trim() } }];"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        784,
        -176
      ],
      "id": "c55f6e37-9a32-4736-830c-d499ef90e06c",
      "name": "Format History2"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "SELECT sender, content FROM (\n    SELECT sender, content, created_at\n    FROM chat_history\n    WHERE session_id = '{{ $('Set SessionID').first().json.sessionId }}'\n    ORDER BY created_at DESC\n    LIMIT 10\n) AS recent_messages\nORDER BY created_at ASC;",
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        592,
        -176
      ],
      "id": "a8b878c7-0734-4816-a249-30d89bb019df",
      "name": "Getchat hisstory2",
      "alwaysOutputData": true,
      "credentials": {
        "mySql": {
          "id": "u8KfE6jFnEBCRiqt",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO chat_history (session_id, sender, content) VALUES ('{{ $('Set SessionID').first().json.sessionId }}', 'user', '{{ $('Webhook').first().json.body.message.replace(/'/g, \"''\") }}');",
        "options": {}
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        1840,
        -176
      ],
      "id": "45869ee0-f7ee-43ef-82a8-6e00ea215c99",
      "name": "Save User Message",
      "credentials": {
        "mySql": {
          "id": "u8KfE6jFnEBCRiqt",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "INSERT INTO chat_history (session_id, sender, content) VALUES ('{{ $('Set SessionID').first().json.sessionId }}', 'ai', '{{ $('Code').item.json.text }}');",
        "options": {
          "queryReplacement": "={{ $('Set SessionID').first().json.sessionId }},{{ $('Webhook').first().json.body.message }}"
        }
      },
      "type": "n8n-nodes-base.mySql",
      "typeVersion": 2.5,
      "position": [
        2032,
        -176
      ],
      "id": "30dae296-2b36-4aee-865f-70cd31bde98b",
      "name": "Save AI Message",
      "credentials": {
        "mySql": {
          "id": "u8KfE6jFnEBCRiqt",
          "name": "MySQL account"
        }
      }
    },
    {
      "parameters": {
        "respondWith": "json",
        "responseBody": "={\n  \"reply\": {{ JSON.stringify($('Code').item.json.text) }}\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2240,
        -176
      ],
      "id": "16a42592-b9b1-4e15-8f72-68c8d22a5364",
      "name": "Respond to Webhook8"
    },
    {
      "parameters": {
        "jsCode": "// L·∫•y chu·ªói d·ªØ li·ªáu th√¥ t·ª´ output c·ªßa node tr∆∞·ªõc\nconst rawOutput = $input.first().json.output;\n\n// N·∫øu rawOutput kh√¥ng t·ªìn t·∫°i ho·∫∑c r·ªóng, tr·∫£ v·ªÅ l·ªói\nif (!rawOutput) {\n  return { error: \"Input from previous node is empty.\" };\n}\n\n// Regex ƒë·ªÉ t√¨m v√† tr√≠ch xu·∫•t n·ªôi dung JSON b√™n trong ```json ... ``` ho·∫∑c json ... ho·∫∑c ƒë·ª©ng m·ªôt m√¨nh\nconst jsonRegex = /(?:```json\\s*)?({[\\s\\S]+?})(?:\\s*```)?/;\n\nconst match = rawOutput.match(jsonRegex);\n\n// Ki·ªÉm tra xem c√≥ t√¨m th·∫•y ƒëo·∫°n JSON kh√¥ng\nif (match && match[1]) {\n  try {\n    // Parse chu·ªói JSON ƒë√£ ƒë∆∞·ª£c tr√≠ch xu·∫•t ƒë·ªÉ ƒë·∫£m b·∫£o n√≥ h·ª£p l·ªá\n    const jsonObject = JSON.parse(match[1]);\n    \n    // Tr·∫£ v·ªÅ ƒë·ªëi t∆∞·ª£ng JSON s·∫°ch trong m·ªôt key 'data' ƒë·ªÉ d·ªÖ d√†ng ph√¢n bi·ªát\n    // ƒê√¢y l√† output cho tr∆∞·ªùng h·ª£p AI tr·∫£ v·ªÅ d·ªØ li·ªáu\n    return { data: jsonObject };\n  } catch (error) {\n    // X·ª≠ l√Ω n·∫øu JSON t√¨m th·∫•y nh∆∞ng kh√¥ng h·ª£p l·ªá (√≠t khi x·∫£y ra v·ªõi AI)\n    return { error: \"Invalid JSON format in AI response\", raw: match[1] };\n  }\n}\n\n// N·∫øu kh√¥ng t√¨m th·∫•y kh·ªëi JSON, coi to√†n b·ªô l√† vƒÉn b·∫£n thu·∫ßn t√∫y\n// ƒê√¢y l√† output cho tr∆∞·ªùng h·ª£p AI tr·∫£ l·ªùi b·∫±ng m·ªôt c√¢u chat th√¥ng th∆∞·ªùng\nreturn { text: rawOutput };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        1632,
        -176
      ],
      "id": "1742c7cf-c439-4b07-83fc-292de940e185",
      "name": "Code"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=[VAI TR√í]\nB·∫°n l√† m·ªôt b·ªô ph√¢n lo·∫°i √Ω ƒë·ªãnh (intent classifier) c·ª±c k·ª≥ hi·ªáu qu·∫£ v√† ch·ªâ tr·∫£ l·ªùi b·∫±ng JSON.\n\n[NHI·ªÜM V·ª§]\nD·ª±a v√†o tin nh·∫Øn cu·ªëi c√πng c·ªßa ng∆∞·ªùi d√πng v√† ng·ªØ c·∫£nh cu·ªôc tr√≤ chuy·ªán, h√£y x√°c ƒë·ªãnh √Ω ƒë·ªãnh ch√≠nh c·ªßa h·ªç thu·ªôc m·ªôt trong c√°c lo·∫°i sau:\n- \"greeting\": Ng∆∞·ªùi d√πng ch·ªâ ch√†o h·ªèi ƒë∆°n thu·∫ßn (v√≠ d·ª•: xin ch√†o, hi, hello).\n- \"specific_beach\": Ng∆∞·ªùi d√πng h·ªèi th√¥ng tin v·ªÅ m·ªôt b√£i bi·ªÉn c·ª• th·ªÉ.\n- \"general_request\": Ng∆∞·ªùi d√πng h·ªèi m·ªôt c√¢u chung chung v·ªÅ vi·ªác g·ª£i √Ω b√£i bi·ªÉn.\n- \"nearby_beach\": Ng∆∞·ªùi d√πng h·ªèi v·ªÅ c√°c b√£i bi·ªÉn ·ªü g·∫ßn v·ªã tr√≠ c·ªßa h·ªç.\n- \"ask_location\": Ng∆∞·ªùi d√πng h·ªèi v·ªÅ v·ªã tr√≠ hi·ªán t·∫°i c·ªßa ch√≠nh h·ªç.\n- \"off_topic\": Y√™u c·∫ßu kh√¥ng li√™n quan ƒë·∫øn du l·ªãch bi·ªÉn ho·∫∑c v·ªã tr√≠.\n\n[NG·ªÆ C·∫¢NH]\n- L·ªãch s·ª≠ tr√≤ chuy·ªán: {{ $('Format History2').item.json.formattedHistory }}\n- Tin nh·∫Øn ng∆∞·ªùi d√πng: \"{{ $('Webhook').first().json.body.message }}\"\n\n[Y√äU C·∫¶U ƒê·∫¶U RA]\nH√£y ch·ªâ tr·∫£ l·ªùi b·∫±ng m·ªôt ƒë·ªëi t∆∞·ª£ng JSON duy nh·∫•t, kh√¥ng gi·∫£i th√≠ch g√¨ th√™m, theo ƒë·ªãnh d·∫°ng:\n{\"intent\": \"t√™n_√Ω_ƒë·ªãnh\"}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        976,
        -176
      ],
      "id": "63d7e7c0-576f-452c-a494-66a85b440a8a",
      "name": "AI Agent1"
    },
    {
      "parameters": {
        "modelName": "models/gemini-1.5-flash-latest",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "typeVersion": 1,
      "position": [
        976,
        -64
      ],
      "id": "1a491e63-a280-49dc-b85a-ca5c8faa446b",
      "name": "Google Gemini Chat Model1",
      "credentials": {
        "googlePalmApi": {
          "id": "zwXlU3zfpHceAKov",
          "name": "render_googleform"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "Set SessionID": {
      "main": [
        [
          {
            "node": "Getchat hisstory2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Set SessionID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Format History2": {
      "main": [
        [
          {
            "node": "AI Agent1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Getchat hisstory2": {
      "main": [
        [
          {
            "node": "Format History2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save User Message": {
      "main": [
        [
          {
            "node": "Save AI Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Save AI Message": {
      "main": [
        [
          {
            "node": "Respond to Webhook8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Save User Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Google Gemini Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5c996f9e-5ffc-4d61-b2ab-977cb347dc19",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "df75f6d19da9532b87ea5a84541b4ccc1d0dd5baf896242962b0dfcbc492bcf4"
  },
  "id": "zmtsM2S8TlcdzgIz",
  "tags": []
}